<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EX-Display: EX-Display</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EX-Display
   </div>
   <div id="projectbrief">EX-Display</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">EX-Display </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A project for multiple displays connected to EX-CommandStation.</p>
<p>The aim is to extend the current JMRI type virtual screen functionality to be displayed on additional microcontrollers with attached screens by using the <code>SCREEN(screen, row, "Message")</code> EXRAIL command.</p>
<p>There will be support for displaying output for multiple logical screens on one single physical display in addition to supporting multiple physical displays.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Terminology - Display vs. Screen</h1>
<p>In the context of this project, the term "display" is used when referring to a physical display connected to a microcontroller to display information.</p>
<p>The term "screen" refers to a logical representation of what EX-CommandStation is expecting to display via the EXRAIL <code>SCREEN(...)</code> command.</p>
<p>A logical "screen" is associated with a physical "display", with EX-Display controlling that association and ensuring EXRAIL <code>SCREEN(...)</code> commands are displayed on the correct physical display.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Supported Display Types</h1>
<p>EX-Display is written in a way to allow implementation of any physical display and its associated display library by using interface classes to abstract the logic away from the required library details.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Configuration</h1>
<p>Copy "config.example.h" to "config.h" and set the desired parameters.</p>
<p>The key parameters to set depend on the physical screen type in use and are commented in the example config file.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Features and Usage</h1>
<p>As features are added they will be outlined here, with examples on how to use them.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Basic EXRAIL commands</h1>
<p>The basic EXRAIL command format is <code>SCREEN(screen, row, "Message")</code>.</p>
<p>This example displays the text "This is row 0" on the first row of the first screen:</p>
<p><code>SCREEN(0, 0, "This is row 0")</code></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Formatting rows</h1>
<p>It is possible to perform limited formatting of rows using the below methods.</p>
<p>Formatting is done once per row, and the formatting codes must be at the beginning of the text. The formatting codes are removed from the text and will not be displayed.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Setting Colours</h2>
<p>It is possible to set the text/foreground and background colours to any valid hex colour code when setting the colours using the "Message" field of the command.</p>
<p>This is done by using the format <code>&lt;@ screen row "#0x&lt;textColour&gt;#0x&lt;backgroundColour&gt;#Message"&gt;</code>. Note that the hex values must be in the format "0xdddd", where "d" represents a four digit colour code.</p>
<p>If you wish to set colours for a row as well as setting another formatting option, then set the row colour first, followed by a second row that sets the text and required formatting.</p>
<p>This example displays the text "Yellow" on the first row of the first screen with yellow coloured text on a black background:</p>
<p><code>SCREEN(0, 0, "#0xFFE0#0x0000#Yellow")</code></p>
<p>If you wish to have a coloured line that is also underlined, do it like this:</p>
<div class="fragment"><div class="line">SCREEN(0, 0, &quot;#0xFFE0#0x0000#&quot;)</div>
<div class="line">SCREEN(0, 0, &quot;__This is now yellow and underlined&quot;)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Horizontal Line</h2>
<p>Note that setting a horizontal line will remove any text previously set for that particular row. To replace a line, simply update it without the line formatting with text, or delete it.</p>
<p><code>SCREEN(0, 0, "--")</code></p>
<h2><a class="anchor" id="autotoc_md9"></a>
Underlined Text</h2>
<p><code>SCREEN(0, 0, "__This is underlined")</code></p>
<h2><a class="anchor" id="autotoc_md10"></a>
Always Ticker This Row</h2>
<p><em>Not implemented yet</em></p>
<p><code>SCREEN(0, 0, "~~This will always ticker")</code></p>
<h2><a class="anchor" id="autotoc_md11"></a>
Never Ticker This Row</h2>
<p><em>Not implemented yet</em></p>
<p><code>SCREEN(0, 0, "!~This will never ticker")</code></p>
<h2><a class="anchor" id="autotoc_md12"></a>
Delete Row</h2>
<p>Simply set the row message to zero length to delete it, noting that this doesn't just blank the text out, but deletes the row in its entirety, including all formatting attributes.</p>
<p><code>SCREEN(0, 1, "")</code></p>
<h1><a class="anchor" id="autotoc_md13"></a>
Serial Connections</h1>
<ul>
<li>MEGA: GND-GND and RX pin 19 on mega to serial tx pin on EX-CS</li>
<li>UNO: GND-GND and RX pin 0 (used testprobes to access both pins under display shield, needs a better physical solution) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
